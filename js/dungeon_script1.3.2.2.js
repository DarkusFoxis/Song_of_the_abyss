// jshint maxerr:1000
//–ò–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã.
const game = {
  gameOverDescription: '–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∫–æ–º–Ω–∞—Ç—É, –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏, —á—Ç–æ —Ç–µ—Ä—è–µ—Ç–µ —Å–æ–∑–Ω–∞–Ω–∏–µ. –≠—Ç–æ –±—ã–ª–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–º–æ–≥–ª–∏ –ª–∏—Ü–µ–∑—Ä–µ—Ç—å...',
  gameOutput: false,
  gameExplosion: true,
  gameFirstWater: false,
  gameSecondWater: false,
  gameCristalCave: false,
  gameEssential: 0,
};

//–û–±—ä–µ–∫—Ç—ã –∏–≥—Ä–æ–∫–∞.
const player = {
  health: 100,
  coins: 0,
  crystals: 0,
  experience: 0,
  total: 0
};

//–û–±—ä–µ–∫—Ç—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.
const effect = {
  fire: {time: 0, damage: 0, icon: '&#128293;'},
  poison: {time: 0, damage: 0, icon: '&#129514;'},
  paranoia: {time: 0, icon: '&#129535;'},
  bleeding: {time: 0, damage: 0, icon: '&#129656;'},
  darknes: {time: 0, damage: 0, icon: 'üåÄ'},
  regen: {time: 0, heal: 0, icon: '&#128156;'}
};

//–ê—É–¥–∏–æ.
const audio = new Audio();


//–ú–∞—Å—Å–∏–≤ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏.
const rooms = [
  { name: '–¢—ë–º–Ω—ã–π –∫–æ—Ä–∏–¥–æ—Ä', description: '–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ —É–∑–∫–æ–º, —Ç–µ–º–Ω–æ–º –∫–æ—Ä–∏–¥–æ—Ä–µ. –í–ø–µ—Ä–µ–¥–∏ –≤–∏–¥–µ–Ω —Å–ª–∞–±—ã–π —Å–≤–µ—Ç.'},
  { name: '–õ–æ–≤—É—à–∫–∞', description: '–í —Ç—ë–º–Ω–æ–º –∫–æ—Ä–∏–¥–æ—Ä–µ –≤—ã –Ω–∞—Ç—ã–∫–∞–µ—Ç–µ—Å—å –Ω–∞ –Ω–µ–±–æ–ª—å—à—É—é –º–∏–Ω—É. –û–Ω–∞ –≤–∑—Ä—ã–≤–∞–µ—Ç—Å—è, –∏ –Ω–µ–º–Ω–æ–≥–æ —Ä–∞–Ω–∏—Ç –≤–∞—Å... –ù–æ —Ç–æ–ª—å–∫–æ –ª–∏ —ç—Ç–æ?...', damage: 5},
  { name: '–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—â–µ—Ä—ã', description: '–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –ø—Ä–æ—Ö–æ–¥ –≤ –∫—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—â–µ—Ä—ã, –Ω–æ, –∫–∞–∂–µ—Ç—Å—è, –æ–Ω –∑–∞–≤–∞–ª–µ–Ω... –°—Ç–æ–∏—Ç –æ–±–æ–π—Ç–∏.'},
  { name: '–°–∫–∞–ª–∏—Å—Ç—ã–µ –ø–µ—â–µ—Ä—ã', description: '–í—ã –¥–æ—à–ª–∏ –¥–æ —Å–∫–∞–ª–∏—Å—Ç—ã—Ö –ø–µ—â–µ—Ä, –æ –∫–æ—Ç–æ—Ä—ã—Ö —á–∏—Ç–∞–ª–∏ –≤ —É—á–µ–±–Ω–∏–∫–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –∫–Ω–∏–≥–∞—Ö. –ï—Å–ª–∏ –≤–∞–º –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –ø–∞–º—è—Ç—å, —Ç–æ –ª—É—á—à–µ –∏—Ö –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å, —á—Ç–æ –≤—ã –∏ –¥–µ–ª–∞–µ—Ç–µ.'},
  { name: '–ó–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏', description: '–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –∫–æ–º–Ω–∞—Ç–∞ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏! –ü—Ä–∞–≤–¥–∞, –∫–∞–∂–µ—Ç—Å—è –¥–æ –≤–∞—Å —Ç—É—Ç –∫—Ç–æ-—Ç–æ –ø–æ–±—ã–≤–∞–ª... –û—Å–º–∞—Ç—Ä–∏–≤–∞—è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–π. –≤—ã —É–≤–∏–¥–µ–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—É—é –±—É—Ç—ã–ª–∫—É. –ö–∞–∂–µ—Ç—Å—è, –≤ –Ω–µ–π —á—Ç–æ-—Ç–æ –µ—Å—Ç—å.'},
  { name: '–ö–æ–º–Ω–∞—Ç–∞ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏', description: '–í—ã –ø–æ–ø–∞–ª–∏ –≤ –ø—Ä–æ—Å—Ç–æ—Ä–Ω—É—é –∫–æ–º–Ω–∞—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –æ—Å—Ç–∞—Ç–∫–∏ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤...', rewards: { coins: 10, experience: 1 } },
  { name: '–õ–æ–≥–æ–≤–æ –º–æ–Ω—Å—Ç—Ä–æ–≤', description: '–í—ã –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ –º—Ä–∞—á–Ω–æ–º, —Å—ã—Ä–æ–º –ø–æ–º–µ—â–µ–Ω–∏–∏. –ò–∑ —Ç–µ–º–Ω—ã—Ö —É–≥–ª–æ–≤ –¥–æ–Ω–æ—Å—è—Ç—Å—è —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏ –∏ —Å–∫—Ä–µ–∂–µ—Ç –∫–æ–≥—Ç–µ–π... –í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –Ω–∞ —Å–µ–±–µ –∫—Ä–æ–≤–æ—Ç–æ—á–∞—â–∏–µ —Ä–∞–Ω—ã...', damage: 25 },
  { name: '–†–µ–∑–∫–∏–π —Å–ø—É—Å–∫', description: '–ö–∞–∂–µ—Ç—Å—è, –ø–æ–¥ –≤–∞–º–∏ –æ–∫–∞–∑–∞–ª–∞—Å—å —Å–ª–æ–º–∞–Ω–Ω–∞—è –ª–µ—Å—Ç–Ω–∏—Ü–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –≤—ã –Ω–µ—á–∞—è–Ω–Ω–æ –Ω–∞—Å—Ç—É–ø–∏–ª–∏, –∏ —Å –≥—Ä–æ—Ö–æ—Ç–æ–º –ø–æ–∫–∞—Ç–∏–ª–∏—Å—å —Å –Ω–µ—ë...', damage: 7 },
  { name: '–†–æ–¥–Ω–∏–∫', description: '–í—ã –≤–∏–¥–∏—Ç–µ –≤–ø–µ—Ä–µ–¥–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Ä–æ–¥–Ω–∏–∫ —Å —á–∏—Å—Ç–µ–π—à–µ–π –≤–æ–¥–æ–π. –ö–∞–∂–µ—Ç—Å—è, –¥–ª—è –≤–∞—Å —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –≤–µ—â—å. –í—ã –Ω–µ–º–Ω–æ–≥–æ –ø–æ–ø–∏–ª–∏ –≤–æ–¥—ã, –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–∏–ª—ã.', heal: 10},
  { name: '–≠—Ñ–∏—Ä–Ω—ã–µ —Ä–µ–∫–∏', description: '–í—ã –ø—Ä–æ—à–ª–∏ –≤ –æ—á–µ–Ω—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –ø–æ–º–µ—â–µ–Ω–∏–µ. –ü–µ—Ä–µ–¥ –≤–∞–º–∏ –¥–≤–µ —Ä–µ–∫–∏. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –∂–∞–∂–¥—É, –∏, –∫–∞–∂–µ—Ç—Å—è, —Å—Ç–æ–∏—Ç –ø–æ–ø–∏—Ç—å –∏–∑ —Ä–µ–∫–∏. –ù–æ –∏–∑ –∫–∞–∫–æ–π?...'},
  { name: '–≠—Ñ–∏—Ä–Ω—ã–π —Ä–æ–¥–Ω–∏–∫', description: '–í—ã –≤–∏–¥–∏—Ç–µ –≤–ø–µ—Ä–µ–¥–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Ä–æ–¥–Ω–∏–∫, –Ω–æ –æ—Ç –Ω–µ–≥–æ –∏—Å—Ö–æ–¥—è—Ç –∫–æ—Ä–Ω–∏. –ö–∞–∂–µ—Ç—Å—è, –æ–Ω —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–æ–º —Å–∞–∫—É—Ä—ã –±–µ–∑–¥–Ω—ã. –í—ã –Ω–∞–ø–∏–ª–∏—Å—å –µ—ë —Å–æ–∫–∞, –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –≥–æ—Ä–∞–∑–¥–æ —Å–∏–ª—å–Ω–µ–µ.', heal: 25},
  { name: "–ü–µ—Ä–µ–≤–∞–ª", description: "–í—ã –ø—Ä–∏—à–ª–∏ –∫ –∫–æ—Å—Ç—Ä—É. –ö–∞–∂–µ—Ç—Å—è, –∑–¥–µ—Å—å –æ—á–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ.", heal: 5},
  { name: "–ö—Ç–æ-—Ç–æ –ø—Ä–µ–≥—Ä–∞–∂–¥–∞–µ—Ç –ø—É—Ç—å", description: '–í—ã –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç–µ—Å—å –∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ, –Ω–æ –ø–æ –ø—É—Ç–∏ –≤—ã —É—Ç—ã–∫–∞–µ—Ç–µ—Å—å –≤ –∫–æ–≥–æ-—Ç–æ, –∫—Ç–æ –ø—Ä–µ–≥—Ä–∞–∂–¥–∞–µ—Ç –ø—É—Ç—å... "–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ - –≤ –º–æ–≥–∏–ª—É, –µ—Å–ª–∏ –Ω–µ –ø—Ä–∏—Å–º–æ—Ç—Ä–∏—à—å—Å—è –∫ –¥–æ—Ä–æ–≥–µ!" –≤—Å–∫—Ä–∏–∫–Ω—É–ª–∞ –æ–Ω–∞. –í—ã –∏–∑–≤–∏–Ω—è–µ—Ç–µ—Å—å, –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –¥–∞–ª—å—à–µ, –Ω–æ –∫–∞–∂–µ—Ç—Å—è –Ω–µ–∑–Ω–∞–∫–æ–º–∫–∞ –Ω–µ —Ç–æ—Ä–æ–ø–∏—Ç—Å—è —É—Å—Ç—É–ø–∞—Ç—å. "–ü—Ä–æ—Ö–æ–¥ –Ω–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –ø–æ–Ω—è–ª? –•–æ—á–µ—à—å –ø—Ä–æ–π—Ç–∏ - –ø–ª–∞—Ç–∏ –¥–µ—Å—è—Ç—å –º–æ–Ω–µ—Ç, –∏ –Ω–µ –∂–∞–ª—É–π—Å—è!" –æ—Ç–≤–µ—Ç–∏–ª–∞ –æ–Ω–∞. –ï—ë –≤–∑–≥–ª—è–¥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Ç–µ–±—è, –æ–∂–∏–¥–∞—è —Ç–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π...'},
  { name: "–õ–æ–≥–æ–≤–æ –î–∞—Ä–∫—É—Å–∞", description: "–ü—Ä–æ–±–∏—Ä–∞—è—Å—å –≥–ª—É–±–∂–µ –≤—ã –Ω–∞—à–ª–∏ –∑–∞–≥–∞–¥–æ—á–Ω—É—é –¥–≤–µ—Ä—å. –ó–∞ –Ω–µ–π —Å–∫—Ä—ã–≤–∞–ª—Å—è –¥–µ–º–æ–Ω –î–∞—Ä–∫—É—Å. –û–Ω –≤–∞—Å –Ω–µ –≤–∏–¥–∏—Ç, –∏, –∫–∞–∂–µ—Ç—Å—è, –æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫—É—é-—Ç–æ –¥–≤–µ—Ä—å. –ß—Ç–æ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ?"},
  { name: "–û–±—Ä—ã–≤", description: "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –ø—Ä–æ–ø–∞—Å—Ç—å. –í–Ω–∏–∑—É –≤—ã –Ω–∞–±–ª—é–¥–∞–µ—Ç–µ –æ—Å—Ç—Ä—ã–µ, –∫–∞–∫ –Ω–æ–∂–∏, –∫–∞–º–Ω–∏, –∏ –µ—Å–ª–∏ –Ω–∞ –Ω–∏—Ö —É–ø–∞—Å—Ç—å, —Å–º–µ—Ä—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. –£ –≤–∞—Å –µ—Å—Ç—å 2 –ø—É—Ç–∏: –ø—Ä–æ–π—Ç–∏ –ø–æ –ø–æ–¥–≤–µ—Å–Ω–æ–º—É –º–æ—Å—Ç—É, –∏–ª–∏ –ø—Ä–æ–π—Ç–∏ –ø–æ –∫—Ä–∞—é –æ–±—Ä—ã–≤–∞. –ö–∞–∫–æ–π –ø—É—Ç—å –≤—ã –≤—ã–±–µ—Ä–∏—Ç–µ? –í –∫–æ–Ω—Ü–µ –º–æ—Å—Ç–∞ –≤–∏–¥–Ω–µ–µ—Ç—Å—è –º–µ—à–æ–∫. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω –Ω–µ –ø—É—Å—Ç–æ–π."},
  { name: "–ó–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è —à–∞—Ö—Ç–∞", description: '–ü—Ä–æ–±–∏—Ä–∞—è—Å—å –≤ –≥–ª—É–±—å, –≤—ã —É–ø–∞–ª–∏ —Å –Ω–µ–±–æ–ª—å—à–æ–π –≤—ã—Å–æ—Ç—ã –≤ –∑–∞–±—Ä–æ—à–µ–Ω–Ω—É—é —à–∞—Ö—Ç—É. –ö–∞–∂–µ—Ç—Å—è, —Ç—É—Ç –µ—Å—Ç—å —á–µ–º –ø–æ–≤–µ—Å–µ–ª–∏—Ç—å—Å—è!',  damage: 3},
  { name: "–°—Ç—Ä–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—á–∫–∞", description: '–ü—Ä–æ–±–∏—Ä–∞—è—Å—å –≤ –≥–ª—É–±—å, –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–Ω–æ –ø—É—Å—Ç—É—é –∫–æ–º–Ω–∞—Ç—É. –ó–∞–π–¥—è –≤ –Ω–µ—ë, –≤—ã –≤–∏–¥–∏—Ç–µ —Å—Ç—Ä–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ –Ω–µ–π: '},
  { name: "–ü–æ–ª—è –°–∞–∫—É—Ä—ã", description: "–í—ã –Ω–∞—Ç–∫–Ω—É–ª–∏—Å—å –Ω–∞ –æ–≥—Ä–æ–º–Ω—ã–µ –ø–ª–∞–Ω—Ç–∞—Ü–∏–∏ —Å–∞–∫—É—Ä. –ö–∞–∂–µ—Ç—Å—è, —ç—Ç–∞ –º–µ—Å—Ç–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∏–ª–∏ DarkOleFox—É, –∏–ª–∏ –∂–µ –∫–∞–∫–æ–º—É-—Ç–æ –≤–ª–∞–¥–µ–ª—å—Ü—É –º–∞–≥–∞–∑–∏–Ω–∞. –¢–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ, –¥–ª—è –º–µ–Ω—è —ç—Ç–æ –Ω–µ —Å–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –≤–µ—â—å..."},
  { name: "–ö–æ—Ä–Ω–∏ —Å–∞–∫—É—Ä—ã", description: "–°–ø—É—Å–∫–∞—è—Å—å –Ω–∏–∂–µ, –≤—ã –Ω–∞—Ç—ã–∫–∞–µ—Ç–µ—Å—å –Ω–∞ –∫–æ—Ä–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Å–∞–∫—É—Ä—ã. –ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö –∫–æ—Ä–Ω–µ–π –≤–∏–¥–Ω–µ–ª–∏—Å—å –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞–Ω—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—ë–∫ –≥—É—Å—Ç–æ–π —ç—Ñ–∏—Ä. –í—ã –Ω–∞–∫–ª–æ–Ω–∏–ª–∏—Å—å, –∏ –∏—Å–ø—Ä–æ–±–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç —Å–æ–∫...", heal: 15},
  { name: "–ö–æ–º–Ω–∞—Ç–∞ –ª–µ—Ç—É—á–∏—Ö –º—ã—à–µ–π", description: "–í—ã –Ω–∞—Ç—ã–∫–∞–µ—Ç–µ—Å—å –Ω–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω—É—é –¥–≤–µ—Ä—å. –û—Ç–∫—Ä—ã–≤ –µ—ë, –Ω–∞ –≤–∞—Å –≤—ã–ª–µ—Ç–µ–ª —Ä–æ–π –ª–µ—Ç—É—á–∏—Ö –º—ã—à–µ–π, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞—Ç–Ω–æ –Ω–∞–ø—É–≥–∞–ª. –û—Å–≤–µ—Ç–∏–≤ –∫–æ–º–Ω–∞—Ç—É, –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ..."},
  { name: "–ë—Ä–æ—à–µ–Ω–Ω–∞—è –º–æ–Ω–µ—Ç–∫–∞", description: "–°–ø—É—Å–∫–∞—è—Å—å –≥–ª—É–±–∂–µ, –≤—ã –Ω–∞—Ç–∫–Ω—É–ª–∏—Å—å –Ω–∞ –º–æ–Ω–µ—Ç–∫—É. –ú–µ–ª–æ—á—å, –∞ —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è!", rewards: { coins: 1} },
  { name: "–õ—è–≥—É—à–∫–∞!!!", description: "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ä–∞—Å—Å—Ç–∏–ª–∞–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–æ–π –≤–æ–¥–æ—ë–º. –í—ã –ø–æ–¥—Ö–æ–¥–∏—Ç–µ –±–ª–∏–∂–µ, –Ω–æ –≤–¥—Ä—É–≥... –ù–∞ –≤–∞—Å –≤—ã–ø—Ä–∏–≥–∏–≤–∞–µ—Ç –õ–Ø–ì–£–®–ö–ê!!! –ò... –í—Å—ë? –î–∞, –ø–æ—Å–ª–µ –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ —É–ø—Ä—ã–≥–∏–≤–∞–µ—Ç. –í—ã –Ω–µ–º–Ω–æ–≥–æ –ø–æ–ø–∏–ª–∏ –∏–∑ –≤–æ–¥–æ—ë–º–∞, –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç–µ —Å–≤–æ–π –ø—É—Ç—å. –ú–æ–∂–µ—Ç, –ª—è–≥—É—à–∫–∞ –±—ã–ª–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –ø—Ä–∏–Ω—Ü–µ—Å—Å–æ–π?...", heal: 15},
];
$('#total').text(rooms.length);

//–ú–∞—Å—Å–∏–≤, —Å –Ω–∞–¥–ø–∏—Å—è–º–∏ –Ω–∞ —Ç–∞–±–ª–∏—á–∫–∞—Ö.
const titles = [
  '"–ß—Ç–æ —Ç—ã —Ç—É—Ç –∏—â–µ—à—å, –ø—É—Ç–Ω–∏–∫?"',
  '"–ê —Ç—ã –∑–Ω–∞–ª, —á—Ç–æ —Ç—ã –≤ —ç—Ç–æ–º –ø–æ–¥—ä–∑–µ–º–µ–ª—å–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª –æ–¥–∏–Ω?"',
  '"–ü–æ—á–µ–º—É —Ç—ã –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—ë—à—å—Å—è –¥–æ–º–æ–π? –¢—É—Ç –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ.~"',
  '"–Ø –∑–Ω–∞—é, —á—Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å—Ç—Ä–∞—Ö.~"',
  '"–≠—Ç–æ –Ω–µ —Ä–µ–∞–ª—å–Ω–æ. –í—Å—ë, —á—Ç–æ —Ç—ã –≤–∏–¥–∏—à—å: —É —Ç–µ–±—è –≤ –≥–æ–ª–æ–≤–µ.~"',
  '"–ú–Ω–µ –≤—Å–µ–≥–¥–∞ –±—ã–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ: –ø–æ—á–µ–º—É –≤—ã —Ç–∞–∫–∏–µ —É–ø—Ä—è–º—ã–µ?~"',
  '"–î–æ —Ç–µ–±—è —Ç—É—Ç –±—ã–ª–æ –º–Ω–æ–≥–æ –ø—É—Ç–Ω–∏–∫–æ–≤. –ñ–∞–ª—å, –Ω–∏–∫—Ç–æ –∏–∑ –Ω–∏—Ö –Ω–µ —Å–º–æ–≥ –ø–µ—Ä–µ–∂–∏—Ç—å —ç—Ç–æ—Ç –≤–µ—á–Ω—ã–π –ª–∞–±–∏—Ä–∏–Ω—Ç —Å—Ç—Ä–∞–¥–∞–Ω–∏–π –∏ —Å—Ç—Ä–∞—Ö–∞.~"',
  '"–ê —Ç—ã –∑–Ω–∞–ª, —á—Ç–æ —Ç—É—Ç –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤–∞ –∏ –∏–∑ –¥—Ä—É–≥–∏—Ö –º–∏—Ä–æ–≤?"',
  '"–ù–µ –≤–µ—Ä—å —Ç—å–º–µ.~"',
  '"–†–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –º—ã –≤—Å—Ç—Ä–µ–º–∏—Ç—Å—è. –Ø —Ç–µ–±–µ –æ–±–µ—â–∞—é —ç—Ç–æ."',
  '"–Ø –±–æ—é—Å—å —Ç–µ–º–Ω–æ—Ç—ã..."',
  '"–Ø –Ω–µ–Ω–∞–≤–∏–∂—É –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ..."',
  '"–ù–µ—É–∂–µ–ª–∏ —Ç—ã –¥—É–º–∞–µ—à—å, —á—Ç–æ —Ç—É—Ç —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ? –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—É–∂–¥–µ–Ω–∏–µ."',
  '"–¢—ã –¥—É–º–∞–µ—à—å, —á—Ç–æ —Ç—ã —É–º–Ω–µ–µ –∑–¥–µ—à–Ω–∏—Ö —Å—É—â–µ–≤—Å—Ç–≤? –ù–µ –ª—å—Å—Ç–∏ —Å–µ–±–µ, –æ—Ç—Å—é–¥–∞ –º–∞–ª–æ –∫—Ç–æ –≤—ã–±–∏—Ä–∞–ª—Å—è –∂–∏–≤—ã–º. –ù–∏–∫—Ç–æ."',
];

function gameOver() {
  $('#room-description').text(game.gameOverDescription);

  $('.game-buttons button').hide();

  $('#restart').show();
}

//–î–∞—Ä–∫—É—Å.
function handleDarkusRoom(action) {
  const randomNumber = Math.round(Math.random() * 100);

  if (action === 'kick') {
    if (randomNumber < 95) {
      game.gameOverDescription = '–í—ã –ø–Ω—É–ª–∏ –¥–µ–º–æ–Ω–∞, –∏ –µ–º—É —ç—Ç–æ —è–≤–Ω–æ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å. –í–∞—Å –≤–Ω–µ–∑–∞–ø–Ω–æ –ø—Ä–æ–Ω–∑–∏–ª–∞ —Å–æ—Ç–Ω—è –Ω–æ–∂–µ–π. –ü–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –≤—ã —É–≤–∏–¥–µ–ª–∏: –º–∞–Ω–∏–∞–∫–∞–ª—å–Ω—É—é —É–ª—ã–±–∫—É –¥–µ–º–æ–Ω–∞, –∏ –∫–∞–∫ –ø–æ –≤–∞—à–∏–º –≥–ª–∞–∑–∞–º —Ç–µ—á—ë—Ç –≤–∞—à–∞ –∫—Ä–æ–≤—å.';
      player.health -= 9999999;
      updateUI();
      $('#kick, #sneak').hide();
    } else {
      $('#room-description').text('–í—ã –ø–Ω—É–ª–∏ –¥–µ–º–æ–Ω–∞, –∏ —É—Å–ø–µ–ª–∏ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è. –û–Ω –≤–∞—Å –Ω–µ –∑–∞–º–µ—Ç–∏–ª, –∏ –ø–æ–±–µ–∂–∞–ª –¥–∞–ª—å—à–µ. –í—ã –ø—Ä–æ—à–ª–∏ –≤ –∫–æ–º–Ω–∞—Ç—É, –∫–æ—Ç–æ—Ä—É—é –æ–Ω –æ—Ö—Ä–∞–Ω—è–ª, –∏ –Ω–∞—à–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –º–æ–Ω–µ—Ç, –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤, –∏ –±—É—Ç—ã–ª–æ—á–µ–∫ –æ–ø—ã—Ç–∞. –í–æ—Ç —ç—Ç–æ —É–ª–æ–≤!');
      player.coins += 15;
      player.crystals += 3;
      player.experience += 10;
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
      updateUI();
    }
  } else if (action === 'sneak') {
    if (randomNumber < 45) {
      $('#room-description').text('–í—ã —Ç–∏—Ö–æ –∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –æ–±–æ—à–ª–∏ –î–∞—Ä–∫—É—Å–∞. –í–∞–º –ø–æ–≤–µ–∑–ª–æ.');
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
    } else if (randomNumber < 55) {
      $('#room-description').text('–î–∞—Ä–∫—É—Å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å, –Ω–æ —É—à–µ–ª —Å –º–∏—Ä–æ–º. –í–∏–¥–∏–º–æ, –æ–Ω –≤ —Ö–æ—Ä–æ—à–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, –Ω–∞–≤–µ—Ä–Ω–æ–µ.');
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
    } else if (randomNumber < 70) {
      $('#room-description').text('–î–∞—Ä–∫—É—Å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å –∏ –ø–æ–¥–∞—Ä–∏–ª 5 –º–æ–Ω–µ—Ç. –ú–µ–ª–æ—á—å, –∞ –ø—Ä–∏—è—Ç–Ω–æ.');
      player.coins += 5;
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
      updateUI();
    } else if (randomNumber < 75) {
      $('#room-description').text('–î–∞—Ä–∫—É—Å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å –∏ –¥–∞–ª –≤–∞–º 1 –∫—Ä–∏—Å—Ç–∞–ª–ª. –ö–∞–∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ, –∏ –ø—Ä–∏—è—Ç–Ω–æ.');
      player.crystals += 1;
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
      updateUI();
    } else if (randomNumber < 85) {
      $('#room-description').text('–î–∞—Ä–∫—É—Å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å, –Ω–æ –æ–Ω –±—ã–ª —Ä–∞–¥ –≤–∞—à–µ–º—É –ø–æ—è–≤–ª–µ–Ω–∏—é. –í—ã –ø–æ–ª—É—á–∏–ª–∏ 10 –±—É—Ç—ã–ª–æ—á–µ–∫ –æ–ø—ã—Ç–∞.');
      player.experience += 10;
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
      updateUI();
    } else {
      $('#room-description').text('–î–∞—Ä–∫—É—Å –∑–∞–º–µ—Ç–∏–ª –≤–∞—Å –∏ —Ä–µ—à–∏–ª –≤ –≤–∞—Å –Ω–µ–º–Ω–æ–≥–æ –ø–æ–º–µ—Ç–∞—Ç—å –Ω–æ–∂–∏. –í—ã –ø–æ–π–º–∞–ª–∏ –≤ —Å–ø–∏–Ω—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–∂–µ–π.');
      player.health -= 25;
      effect.bleeding.time += 5;
      effect.bleeding.damage = 10;
      updateUI();
      $('#go-deeper, #exit').show();
      $('#kick, #sneak').hide();
    }
  }
}

//–û–±—Ä—ã–≤.
function handleCliffRoom(action){
  const randomNumber = Math.round(Math.random() * 100);

  if (action === "suspension") {
    if (randomNumber < 65) {
      game.gameOverDescription = '–í—ã —Ä–µ—à–∏–ª–∏ –ø—Ä–æ–π—Ç–∏ –ø–æ –ø–æ–¥–≤–µ—Å–Ω–æ–º—É –º–æ—Å—Ç—É, –æ–¥–Ω–∞–∫–æ –¥–æ–π–¥—è –¥–æ —Å–µ—Ä–µ–¥–∏–Ω—ã –æ–Ω –ø–æ—Ä–≤–∞–ª—Å—è, –∏ –≤—ã —Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª–µ—Ç–µ–ª–∏ –≤–Ω–∏–∑, –∏ —Ä–∞–∑–±–∏–ª–∏—Å—å –æ–± –∫–∞–º–Ω–∏...';
      player.health -= 9999999;
      updateUI();
      $('#suspension, #edge').hide();
    } else {
      let randomGem = Math.ceil(Math.random() * 5);
      $('#room-description').text(`–í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ –ø–æ –º–æ—Å—Ç—É, –∏ –æ—Ç–∫—Ä—ã–ª–∏ —Å—É–º–∫—É. –í –Ω–µ–π –Ω–∞—Ö–æ–¥–∏–ª–æ—Å—å ${randomGem} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤.`);
      player.crystals += randomGem;
      $('#go-deeper, #exit').show();
      $('#suspension, #edge').hide();
      updateUI();
    }
  } else {
    if (randomNumber < 95) {
      $('#room-description').text(`–í—ã —É—Å–ø–µ—à–Ω–æ –æ–±–æ—à–ª–∏ –æ–±—Ä—ã–≤. –Ω–∞–≤–µ—Ä–Ω–æ–µ, –º–µ—à–æ–∫ –Ω–µ —Å—Ç–æ–∏—Ç –∂–∏–∑–Ω–∏.`);
      $('#go-deeper, #exit').show();
      $('#suspension, #edge').hide();
      updateUI();
    } else {
      game.gameOverDescription = '–í—ã –æ–±—Ö–æ–¥–∏—Ç–µ –æ–±—Ä—ã–≤, –æ–¥–Ω–∞–∫–æ —á–∞—Å—Ç—å –≤—ã—Å—Ç—É–ø–∞ –æ–±—Ä—É—à–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –≤–∞–º–∏, –∏ –≤—ã —Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ –ª–µ—Ç–∏—Ç–µ –Ω–∞ –∫–∞–º–Ω–∏...';
      player.health -= 9999999;
      updateUI();
      $('#suspension, #edge').hide();
    }
  }
}

//–®–∞—Ö—Ç–∞.
function handleMineRoom(action){
  const randomNumber = Math.round(Math.random() * 100);

  switch (action) {
    case "trolley":
      if (game.gameExplosion === false) {
        $('#room-description').text(`–í—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ª–æ–∂–∏—Ç—å —è—â–∏–∫–∏ —Å–æ –≤–∑—Ä—ã–≤—á–∞—Ç–∫–æ–π –≤ –≤–∞–≥–æ–Ω–µ—Ç–∫—É, –∏ –ø—É—Å—Ç–∏–ª–∏ –µ—ë. –ù–∞ —Å–µ–∫—É–Ω–¥—É –≤—ã —É—Å–ª—ã—à–∞–ª–∏ –≤–∑—Ä—ã–≤, –∏ –≤–Ω–µ–∑–∞–ø–Ω–æ —à–∞—Ö—Ç–∞ –∑–∞—Ç—Ä—è—Å–ª–∞—Å—å... –ú–æ–∂–µ—Ç, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ-—Ç–æ —Ö–æ—Ä–æ—à–µ–µ?`);
        game.gameCristalCave = true;
        $('#trolley').hide();
      } else if (randomNumber < 50) {
        $('#room-description').text(`–í—ã —Ç–æ–ª–∫–Ω—É–ª–∏ –≤–∞–≥–æ–Ω–µ—Ç–∫—É, –∏ –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ —É–µ—Ö–∞–ª–∞... –ù–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ.`);
        $('#trolley').hide();
      } else {
        $('#room-description').text(`–í—ã —Å–æ–±–∏—Ä–∞–ª–∏—Å—å —Ç–æ–ª–∫–Ω—É—Ç—å –≤–∞–≥–æ–Ω–µ—Ç–∫—É. –ü–æ–¥–æ–π–¥—è –±–ª–∏–∂–µ, –Ω–∞ –≤–∞—à–∏ –≥–ª–∞–∑–∞ –ø–æ–ø–∞–ª–∞ –∑–∞–ø–∏—Å–∫–∞: "ÂèãÈÅî„ÄÅÁßÅ„Åü„Å°„ÅØ„Åì„ÅÆÈâ±Â±±„ÅßËø∑Â≠ê„Å´„Å™„Å£„Å¶„ÅØ„ÅÑ„Åë„Åæ„Åõ„Çì„ÄÇ„ÄÇ„ÄÇ „Åì„Åì„Å´„ÅÑ„Çã„Åì„Å®„Å´Ê∞ó‰ªò„ÅÑ„ÅüÂ†¥Âêà„ÅØ„ÄÅ„Åß„Åç„Çã„Å†„ÅëÊó©„ÅèËµ∞„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„ÄÇ„ÄÇ „Åì„Åì„Åã„ÇâÂá∫„ÇãÊñπÊ≥ï„ÅØ„Å™„ÅÑ„ÄÇ„ÄÇ„ÄÇ". –ñ–∞–ª—å, –≤—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ —ç—Ç–æ—Ç —è–∑—ã–∫, –ø–æ—ç—Ç–æ–º—É —ç—Ç–∞ –∑–∞–ø–∏—Å–∫–∞ –±—ã–ª–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞. –í—ã –ø—É—Å—Ç–∏–ª–∏ –≤–∞–≥–æ–Ω–µ—Ç–∫—É, –∏ –æ–Ω–∞ —É–µ—Ö–∞–ª–∞ –≤ –æ–±—Ä—ã–≤.`);
        $('#trolley').hide();
      }
      break;
    case "boxes":
      if (randomNumber < 50) {
        $('#room-description').text(`–í—ã –ø–æ–¥–æ—à–ª–∏ –∫ –∫–æ—Ä–æ–±–∫–∞–º, –∏ –∑–∞–º–µ—Ç–∏–ª–∏ –≤ –Ω–∏—Ö –±–æ–ª—å—à—É—é –∫—É—á—É –≤–∑—Ä—ã–≤—á–∞—Ç–∫–∏... –í—ã —É—Å–ø–µ—à–Ω–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —É–±—Ä–∞–ª–∏ –µ—ë. –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ —Å–ø–∞—Å–ª–æ –≤–∞–º –∂–∏–∑–Ω—å...`);
        $('#boxes').hide();
        game.gameExplosion = false;
      } else if (randomNumber < 95) {
        game.gameOverDescription = '–í—ã –ø–æ–¥–æ—à–ª–∏ –∫ –∫–æ—Ä–æ–±–∫–∞–º, –∏ –∑–∞–º–µ—Ç–∏–ª–∏ –≤ –Ω–∏—Ö –±–æ–ª—å—à—É—é –∫—É—á—É –≤–∑—Ä—ã–≤—á–∞—Ç–∫–∏... –í –≤–∞—à–µ–π –≥–æ–ª–æ–≤–µ –ø—Ä–æ—Å–∫–æ—á–∏–ª–∞ –∏–¥–µ—è —É–±—Ä–∞—Ç—å –µ—ë –ø–æ–¥–∞–ª—å—à–µ, –Ω–æ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∫–æ—Ä–æ–±–∫–∞ –æ–∫–∞–∑–∞–ª–∞—Å—å —É –≤–∞—Å –≤ —Ä—É–∫–∞—Ö, –æ–Ω–∞ —Ç—É—Ç –∂–µ –≤–∑–æ—Ä–≤–∞–ª–∞—Å—å, –Ω–µ –æ—Å—Ç–∞–≤–∏–≤ –æ—Ç –≤–∞—Å –∏ –ø—É—Å—Ç–æ–≥–æ –º–µ—Å—Ç–∞...';
        player.health -= 9999999;
        updateUI();
      } else {
        $('#room-description').text(`–í—ã –ø–æ–¥–æ—à–ª–∏ –∫ –∫–æ—Ä–æ–±–∫–∞–º, –∏ –∑–∞–º–µ—Ç–∏–ª–∏ –≤ –Ω–∏—Ö –±–æ–ª—å—à—É—é –∫—É—á—É –±—É—Ç—ã–ª—å–∫–æ–≤ –æ–ø—ã—Ç–∞! –í–æ—Ç —ç—Ç–æ —Å—é—Ä–ø—Ä–∏–∑!`);
        $('#boxes').hide();
         player.experience += 25;
         updateUI();
      }
      break;
    case "button":
      if (randomNumber < 75) {
        if (game.gameExplosion) {
          game.gameOverDescription = '–ü–æ–¥–æ–π–¥—è –∫ —Å—Ç—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ, –≤—ã –±–µ–∑ –∑–∞–¥–Ω–µ–π –º—ã—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –Ω–µ—ë, –∏ —É—Å–ª—ã—à–∞–ª–∏ —Å—Ç—Ä–∞–Ω–Ω–æ–µ —à–∏–ø–µ–Ω–∏–µ... –í—ã —Ç–æ–ª—å–∫–æ —É—Å–ø–µ–ª–∏ –ø–æ–¥–Ω—è—Ç—å –≥–ª–∞–∑–∞ –Ω–∞ –∫—É—á—É —è—â–∏–∫–æ–≤, –∫–∞–∫ —Ç—É—Ç –∂–µ –≤–µ—Å—å —Ç—Ä–∞—Ç–∏–ª –≤ –Ω–∏—Ö –ø–æ–¥–æ—Ä–≤–∞–ª—Å—è, –∏ –≤–∞—Å —Ä–∞—Å–Ω–µ—Å–ª–æ –Ω–∞ –º–µ–ª–∫–∏–µ —á–∞—Å—Ç–∏—Ü—ã...';
          player.health -= 9999999;
          updateUI();
        } else {
          $('#room-description').text(`–ü–æ–¥–æ–π–¥—è –∫ —Å—Ç—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ, –≤—ã –±–µ–∑ –∑–∞–¥–Ω–µ–π –º—ã–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –Ω–µ—ë, –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ. –ö–∞–∂–µ—Ç—Å—è, —Ç–µ —è—â–∏–∫–∏ —Å —Ç—Ä–æ—Ç–∏–ª–æ–º –±—ã–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —ç—Ç–æ–π –∫–Ω–æ–ø–∫–µ.`);
          $('#button').hide();
        }
      } else {
        $('#room-description').text(`–ü–æ–¥–æ–π–¥—è –∫ —Å—Ç—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ, –≤—ã –±–µ–∑ –∑–∞–¥–Ω–µ–π –º—ã–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –Ω–µ—ë, –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ. –ö–∞–∂–µ—Ç—Å—è, –æ–Ω–∞ —Å–ª–æ–º–∞–Ω–Ω–∞.`);
        $('#button').hide();
      }
      break;
    case "scream":
      if (randomNumber < 25){
        $('#room-description').text(`–í—ã –∫—Ä–∏–∫–Ω—É–ª–∏ –Ω–∞ –≤—Å—é —à–∞—Ö—Ç—É, –Ω–æ, –∫–∞–∂–µ—Ç—Å—è –≤—ã —Ç—É—Ç –æ–¥–Ω–∏. –ò–ª–∏ –º–æ–∂–µ—Ç –Ω–∏–∫—Ç–æ —Å –≤–∞–º–∏ –Ω–µ —Ö–æ—á–µ—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è?`);
        $('#scream').hide();
      } else if (randomNumber < 50) {
        $('#room-description').text(`–í—ã –∫—Ä–∏–∫–Ω—É–ª–∏ –Ω–∞ –≤—Å—é —à–∞—Ö—Ç—É, –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ, –∫—Ç–æ –≤–∞—Å —É—Å–ª—ã—à–∞–ª, —ç—Ç–æ –ª–µ—Ç—É—á–∏–µ –º—ã—à–∏...`);
        $('#scream').hide();
      } else if (randomNumber < 75) {
        $('#room-description').text(`–í—ã –∫—Ä–∏–∫–Ω—É–ª–∏ –Ω–∞ –≤—Å—é —à–∞—Ö—Ç—É, –∏ –Ω–∞ —à–∞—Ö—Ç–µ —Å–ª—É—á–∏–ª—Å—è –æ–±–≤–∞–ª!!! –í—ã –Ω–µ–º–Ω–æ–≥–æ –ø–æ—Ä–∞–Ω–∏–ª–∏—Å—å... –î—É–º–∞—é, —ç—Ç–æ –±—ã–ª —Ö–æ—Ä–æ—à–∏–π —É—Ä–æ–∫, —á—Ç–æ –∫—Ä–∏—á–∞—Ç—å –Ω–∞ —à–∞—Ö—Ç–µ —Ç–æ—á–Ω–æ –Ω–µ —Å—Ç–æ–∏—Ç...`);
        $('#scream').hide();
        player.health -= 10;
        effect.bleeding.time += 5;
        effect.bleeding.damage = 3;
        updateUI();
      } else {
        game.gameOverDescription = '–í—ã –∫—Ä–∏–∫–Ω—É–ª–∏ –Ω–∞ –≤—Å—é —à–∞—Ö—Ç—É, –∏ –≤–∞—Å —É—Å–ª—ã—à–∞–ª–∞... –û—Ä–¥–∞ –º–æ–Ω—Å—Ç—Ä–æ–≤... –≠—Ç–æ –Ω–µ —Ç–æ, –∫–æ–≥–æ –≤—ã —Ç—É—Ç –æ–∂–∏–¥–∞–ª–∏ —É–≤–∏–¥–µ—Ç—å... –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–Ω–∏ —Ä–∞–∑–æ—Ä–≤–∞–ª–∏ –≤–∞—Å –Ω–∞ –º–µ–ª–∫–∏–µ —á–∞—Å—Ç–∏—Ü—ã...';
        player.health -= 9999999;
        updateUI();
      }
  }
}

//–ü–æ–¥–Ω—è—Ç–∏–µ –±—É—Ç—ã–ª–∫–∏.
function handleBotleUp() {
  const randomNumber = Math.round(Math.random() * 125);

  if (randomNumber < 25) {
    $('#room-description').text(`–í—ã –ø–æ–¥–Ω—è–ª–∏ –±—É—Ç—ã–ª–∫—É, –Ω–æ –≤ –Ω–µ–π –±—ã–ª–æ –ø—É—Å—Ç–æ... –û—á–µ—Ä–µ–¥–Ω–æ–π –º—É—Å–æ—Ä.`);
    $('#bootle_up').hide();
  } else if (randomNumber < 50) {
    $('#room-description').text(`–í—ã –ø–æ–¥–Ω—è–ª–∏ –±—É—Ç—ã–ª–∫—É, –∏ —É–≤–∏–¥–µ–ª–∏. —á—Ç–æ –æ–Ω–∞ –≥–æ—Ä–∏—Ç... –û–Ω–∞ –ª–æ–ø–Ω—É–ª–∞ —É –≤–∞—Å –≤ —Ä—É–∫–∞—Ö, –∏ –≥–æ—Ä—è—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞ –≤–∞—Å... `);
    $('#bootle_up').hide();
    effect.fire.time += 3;
    effect.fire.damage = 15;
    updateUI();
  } else if (randomNumber < 75) {
    $('#room-description').text(`–í—ã –ø–æ–¥–Ω—è–ª–∏ –±—É—Ç—ã–ª–∫—É, –∏, –∫–∞–∂–µ—Ç—Å—è, –≤ –Ω–µ–π –≤–æ–¥–∞! –í—ã —Ä–µ—à–∞–µ—Ç–µ –µ—ë –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –Ω–æ... –≠—Ç–æ –æ–∫–∞–∑–∞–ª—Å—è –∞–ª–∫–æ–≥–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ç—É—Ç –∂–µ –≤—ã–ø–ª—é–Ω—É–ª–∏. –£–ª–æ–≤ —Å–æ–≤—Å–µ–º –Ω–µ –≥—É—Å—Ç–æ–π...`);
    $('#bootle_up').hide();
    effect.paranoia.time += 5;
    updateUI();
  } else if (randomNumber < 100) {
    $('#room-description').text(`–í—ã –ø–æ–¥–Ω—è–ª–∏ –±—É—Ç—ã–ª–∫—É, –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏. –í –Ω–µ–π –±—ã–ª–∞ –≤–æ–¥–∞! –í—ã –µ—ë –≤—ã–ø–∏–ª–∏, –∏ –Ω–∞–ø—Ä–∞–≤–∏–ª–∏—Å—å –∫ –≤—ã—Ö–æ–¥—É, –Ω–æ –ø–æ–Ω—è–ª–∏, —á—Ç–æ —Å –≤–æ–¥–æ–π –±—ã–ª–æ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫...`);
    $('#bootle_up').hide();
    effect.poison.time += 10;
    effect.poison.damage = 3;
    updateUI();
  } else {
    $('#room-description').text(`–í—ã –ø–æ–¥–Ω—è–ª–∏ –±—É—Ç—ã–ª–∫—É, –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏. –í –Ω–µ–π –±—ã–ª–∞ –≤–æ–¥–∞! –í—ã –µ—ë –≤—ã–ø–∏–ª–∏, –∏ —ç—Ç–æ –æ–∫–∞–∑–∞–ª—Å—è —ç—Ñ–∏—Ä–Ω–∞—è –≤–æ–¥–∞!`);
    $('#bootle_up').hide();
    if (effect.bleeding.time === 0) {
      player.health += 25;
    }
    updateUI();
  }
}

//–≠—Ñ–∏—Ä–Ω—ã–µ —Ä–µ–∫–∏.
function handleWaterRoom(action) {
  if (action == "firstWater") {
    if (game.gameFirstWater) {
      $('#room-description').text(`–í—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ø–∏—Ç—å –∏–∑ –ø–µ—Ä–≤–æ–π —Ä–µ–∫–∏. –í–æ–¥–∞, –∫–∞–∂–µ—Ç—Å—è, —á–∏—Å—Ç–∞. –í—ã –æ—â—É—â–∞–µ—Ç–µ –ø—Ä–∏–ª–∏–≤ —Å–∏–ª!`);
      if (effect.bleeding.time === 0) {
        player.health += 15;
      }
      $('#go-deeper, #exit').show();
      $('#firstWater, #secondWater').hide();
      updateUI();
    } else {
      $('#room-description').text(`–í—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ø–∏—Ç—å –∏–∑ –ø–µ—Ä–≤–æ–π —Ä–µ–∫–∏. –í–æ–¥–∞, –∫–∞–∂–µ—Ç—Å—è, —á–∏—Å—Ç–∞. –ù–∞–ø–∏–≤—à–∏—Å—å –≤–¥–æ–≤–æ–ª—å, –≤—ã —Ä–µ—à–∞–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å, –Ω–æ, –∫–∞–∂–µ—Ç—Å—è, –≤–æ–¥–∞ –±—ã–ª–∞ –æ—Ç—Ä–∞–≤–ª–µ–Ω–∞...`);
      effect.poison.time += 10;
      effect.poison.damage = 5;
      $('#go-deeper, #exit').show();
      $('#firstWater, #secondWater').hide();
      updateUI();
    }
  } else {
    if (game.gameSecondWater) {
      $('#room-description').text(`–í—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ø–∏—Ç—å –∏–∑ –≤—Ç–æ—Ä–æ–π —Ä–µ–∫–∏. –í–æ–¥–∞, –∫–∞–∂–µ—Ç—Å—è, —á–∏—Å—Ç–∞. –í—ã –æ—â—É—â–∞–µ—Ç–µ –ø—Ä–∏–ª–∏–≤ —Å–∏–ª!`);
      if (effect.bleeding.time === 0) {
        player.health += 15;
      }
      $('#go-deeper, #exit').show();
      $('#firstWater, #secondWater').hide();
      updateUI();
    } else {
      $('#room-description').text(`–í—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ø–∏—Ç—å –∏–∑ –≤—Ç–æ—Ä–æ–π —Ä–µ–∫–∏. –í–æ–¥–∞, –∫–∞–∂–µ—Ç—Å—è, —á–∏—Å—Ç–∞. –ù–∞–ø–∏–≤—à–∏—Å—å –≤–¥–æ–≤–æ–ª—å, –≤—ã —Ä–µ—à–∞–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å, –Ω–æ, –∫–∞–∂–µ—Ç—Å—è, –≤–æ–¥–∞ –±—ã–ª–∞ –æ—Ç—Ä–∞–≤–ª–µ–Ω–∞...`);
      effect.poison.time += 10;
      effect.poison.damage = 5;
      $('#go-deeper, #exit').show();
      $('#firstWater, #secondWater').hide();
      updateUI();
    }
  }
}

//–ö—Ç–æ-—Ç–æ –ø—Ä–µ–≥—Ä–∞–∂–¥–∞–µ—Ç –ø—É—Ç—å.
function handleWRoom(action){
  if (action == "pay" && player.coins !== 0) {
    if (player.coins >= 10) {
      $('#room-description').text(`–í—ã –ø—Ä–æ—Ç—è–Ω—É–ª–∏ –º–æ–Ω–µ—Ç—ã –Ω–µ–∑–Ω–∞–∫–æ–º–∫–µ. –û–Ω–∞ —Å —Ä–∞–¥–æ—Å—Ç—å—é –∏—Ö –≤–∑—è–ª–∞, –∏ –∏—Å—á–µ–∑–ª–∞. –ü—Ä–æ–π–¥—è –≤ –∫–æ–º–Ω–∞—Ç—É, –≤—ã –Ω–∞—à–ª–∏ —Å—Ç–∞—Ä—ã–π –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –ª–∞–≥–µ—Ä—å —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–Ω–∏–∫–æ–≤. –ï—â—ë –≥–æ—Ä–µ–ª –∫–æ—Å—Ç—ë—Ä, –∏, –∫–∞–∂–µ—Ç—Å—è, —Ç—É—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ.`);
      if (effect.bleeding.time === 0) {
        player.health += 15;
      }
      player.coins -= 10;
      player.experience += 3;
      game.gameOutput = true;
      $('#go-deeper, #exit').show();
      $('#pay, #dont_pay').hide();
      updateUI();
    } else {
      $('#room-description').text(`–í—ã –ø—Ä–æ—Ç—è–Ω—É–ª–∏ –≤—Å–µ –º–æ–Ω–µ—Ç—ã, —á—Ç–æ –±—ã–ª–∏ –Ω–µ–∑–Ω–∞–∫–æ–º–∫–µ. –û–Ω–∞ –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∞ –Ω–∞ –≤–∞—Å —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ–º, –Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∞. –ü—Ä–∏–∫–æ—Å–Ω—É–≤—à–∏—Å—å –∫ –¥–≤–µ—Ä–∏, –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ —Å—Ç—Ä–∞–Ω–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ—Ä–µ–Ω–∏—è... –ü—Ä–æ–π–¥—è –≤ –∫–æ–º–Ω–∞—Ç—É, –≤—ã –Ω–∞—à–ª–∏ —Å—Ç–∞—Ä—ã–π –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –ª–∞–≥–µ—Ä—å —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–Ω–∏–∫–æ–≤. –ï—â—ë –≥–æ—Ä–µ–ª –∫–æ—Å—Ç—ë—Ä, –∏, –∫–∞–∂–µ—Ç—Å—è, —Ç—É—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ... –ù–∞–≤–µ—Ä–Ω–æ–µ...`);
      effect.fire.time += 3;
      effect.fire.damage = 10;
      player.coins = 0;
      effect.paranoia.time += 20;
      $('#go-deeper, #exit').show();
      $('#pay, #dont_pay').hide();
      updateUI();
    }
  } else {
    $('#room-description').text(`–í—ã –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –ø–ª–∞—Ç–∏—Ç—å, —á—Ç–æ –µ—ë –ø—Ä–∏–≤–µ–ª–æ –≤ —è—Ä–æ—Å—Ç—å, –Ω–æ –æ–Ω–∞ –ø—Ä–æ–ø–∞–ª–∞. –ü—Ä–∏–∫–æ—Å–Ω—É–≤—à–∏—Å—å –∫ –¥–≤–µ—Ä–∏, –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç—å–º—É... –ü—Ä–æ–π–¥—è –≤ –∫–æ–º–Ω–∞—Ç—É, –≤—ã –Ω–∞—à–ª–∏ —Å—Ç–∞—Ä—ã–π –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –ª–∞–≥–µ—Ä—å —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–Ω–∏–∫–æ–≤. –ï—â—ë –≥–æ—Ä–µ–ª –∫–æ—Å—Ç—ë—Ä, –Ω–æ... –í–∞–º –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ –º–µ—Å—Ç–æ –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ...`);
    effect.darknes.time += 2;
    effect.darknes.damage = 25;
    effect.paranoia.time += 20;
    $('#go-deeper, #exit').show();
    $('#pay, #dont_pay').hide();
    updateUI();
  }
}

//–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–µ—â–µ—Ä–∞ –±–µ–∑ –æ–±–≤–∞–ª–∞.
function handleCavesRoom(action) {
  const randomNumber = Math.round(Math.random() * 100);

  switch (action) {
    case "study":
      if (randomNumber < 25) {
        $('#room-description').text(`–í—ã –Ω–∞—á–∏—Ç–∞–µ—Ç–µ –∏–∑—É—á–∞—Ç—å –ø–µ—â–µ—Ä—É. –û–Ω–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —Å–∞–º—ã–º–∏ —Ä–∞–∑–Ω—ã–º–∏ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–º–∏ –∫–∞–º–Ω—è–º–∏. –ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ, –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –∑–∞—Å—Ç—ã–≤—à–∏–π –∫—É—Å–æ—á–µ–∫ —ç—Ñ–∏—Ä–∞ —Å–∞–∫—É—Ä—ã. –í—ã –ø–æ–ª–æ–∂–∏–ª–∏ —Å–µ–±–µ –≤ –∫–∞—Ä–º–∞—à–µ–∫ —Ç–∞–∫—É—é –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—É—é –≤–µ—â–∏—á–∫—É.`);
        game.gameEssential += 1;
        $('#study').hide();
        updateUI();
      } else {
        $('#room-description').text(`–í—ã –Ω–∞—á–∏—Ç–∞–µ—Ç–µ –∏–∑—É—á–∞—Ç—å –ø–µ—â–µ—Ä—É. –û–Ω–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —Å–∞–º—ã–º–∏ —Ä–∞–∑–Ω—ã–º–∏ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–º–∏ –∫–∞–º–Ω—è–º–∏. –í—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –æ—Å—Ç–∞—Ç—å—Å—è –∑–¥–µ—Å—å –Ω–∞–¥–æ–ª–≥–æ, –Ω–æ –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.`);
        $('#study').hide();
      }
      break;
    case "shoot_down":
      if (randomNumber < 50) {
        $('#room-description').text(`–í—ã —Ä–µ—à–∞–µ—Ç–µ —Ä–∞–¥–∏ –∑–∞–±–∞–≤—ã –ø–æ—Å–±–∏–≤–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã —Å–≤–µ—Ä—Ö—É. –°–±–∏–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤, –≤–∞—à–∏ –Ω–æ–≥–∏ –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∏ –∫ –Ω–∏–º, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∞—è –∏—Ö, –Ω–æ –Ω–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç–µ.`);
        $('#shoot_down').hide();
      } else if (randomNumber < 75) {
        $('#room-description').text(`–í—ã —Ä–µ—à–∞–µ—Ç–µ —Ä–∞–¥–∏ –∑–∞–±–∞–≤—ã –ø–æ—Å–±–∏–≤–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã —Å–≤–µ—Ä—Ö—É. –°–±–∏–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤, –≤–∞—à –≤–∑–æ—Ä –ø–∞–¥–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∞–ª–∏ –æ—Å—ã–ø–∞—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–ø–∞–¥—É! –í—ã —Ä–µ–∑–∫–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å –∫ –≤—ã—Ö–æ–¥—É, –∏ —É—Å–ø–µ—à–Ω–æ —Å–±–µ–≥–∞–µ—Ç–µ –±–µ–∑ —Ä–∞–Ω–µ–Ω–∏–π!`);
        $('#study, #shoot_down, #scream_cristal, #review').hide();
      } else {
        $('#room-description').text(`–í—ã —Ä–µ—à–∞–µ—Ç–µ —Ä–∞–¥–∏ –∑–∞–±–∞–≤—ã –ø–æ—Å–±–∏–≤–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã —Å–≤–µ—Ä—Ö—É. –°–±–∏–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤, –≤–∞—à –≤–∑–æ—Ä –ø–∞–¥–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∞–ª–∏ –æ—Å—ã–ø–∞—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–ø–∞–¥—É! –í—ã —Ä–µ–∑–∫–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å –∫ –≤—ã—Ö–æ–¥—É, –Ω–æ –ø–æ –ø—É—Ç–∏ –Ω–∞ –≤–∞—Å –ø–∞–¥–∞—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Å–∫–æ–ª–∫–∏ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤, –æ—Å—Ç–∞–≤–ª—è—è –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞–Ω—ã...`);
        player.health -= 10;
        effect.bleeding.time += 6;
        effect.bleeding.damage = 10;
        $('#study, #shoot_down, #scream_cristal, #review').hide();
        updateUI();
      }
      break;
    case "scream_cristal":
      $('#room-description').text(`–í –≤–∞—à–µ–π –≥–æ–ª–æ–≤–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤–æ—Å—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è, –∫–æ–≥–¥–∞ –≤–∞–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—É—Ç–Ω–∏–∫–∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∏, —á—Ç–æ –µ—Å–ª–∏ –∫—Ä–∏–∫–Ω—É—Ç—å –≤ –∫—Ä–∏—Å—Ç–∞–ª—å–Ω–æ–π –ø–µ—â–µ—Ä–µ, —Ç–æ —ç—Ö–æ –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –∑–≤–æ–Ω—á–µ. –í—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –∏ –æ—á–µ–Ω—å –≥—Ä–æ–º–∫–æ –∫—Ä–∏–∫–Ω—É–ª–∏. –≠—Ö–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª–æ –≥—Ä–æ–º—á–µ, –∞ —Ç–∞–∫ –∂–µ –≤—ã —Å–ª—ã—à–∏—Ç–µ –ø—Ä–∏—è—Ç–Ω—ã–π —Å–ª—É—Ö—É –∑–≤–æ–Ω –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤... –≠—Ç–æ —Ç–∞–∫–∞—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –º–µ–ª–æ–¥–∏—è.`);
      $('#scream_cristal').hide();
      break;
    case "review":
      if (randomNumber < 50) {
        $('#room-description').text(`–í—ã –Ω–∞—á–∏—Ç–∞–µ—Ç–µ –∏–∑—É—á–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã –ø–µ—Ä–µ–¥ –≤–∞–º–∏. –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –Ω–µ —Å–∞–º–∞—è —Ö–æ—Ä–æ—à–∞—è –∏–¥–µ—è, –≤–µ–¥—å –≤—ã –Ω–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç–µ, –Ω–æ —Ç–æ–ª—å–∫–æ —Ç–µ—Ä—è–µ—Ç–µ –≤—Ä–µ–º—è...`);
        $('#review').hide();
      } else if (randomNumber < 90) {
        $('#room-description').text(`–í—ã –Ω–∞—á–∏—Ç–∞–µ—Ç–µ –∏–∑—É—á–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã –Ω–µ–º–Ω–æ–≥–æ –¥–∞–ª—å—à–µ –æ—Ç –≤–∞—Å. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –Ω–µ–±–æ–ª—å—à–∏–µ –≤–∫—Ä–∞–ø–ª–µ–Ω–∏–µ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã—Ö –∫–∞–º–Ω–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ —Å–∞–º–∞—è –¥–æ—Ä–æ–≥–∞—è –≤–∞–ª—é—Ç–∞.`);
        player.crystals += 5;
        $('#review').hide();
        updateUI();
      } else {
        $('#room-description').text(`–í—ã –Ω–∞—á–∏—Ç–∞–µ—Ç–µ –∏–∑—É—á–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∞–ª–µ–∫–µ –æ—Ç –≤—Ö–æ–¥–∞ –≤ –ø–µ—â–µ—Ä—É. –í –æ–¥–Ω–æ–º –∏–∑ –Ω–∏—Ö –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –∑–∞—Å—Ç—ã–≤—à–∏–π –∫—É—Å–æ—á–µ–∫ —ç—Ñ–∏—Ä–∞ —Å–∞–∫—É—Ä—ã!`);
        player.crystals += 5;
        $('#review').hide();
        updateUI();
      }
      break;
  }
}

//–§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ñ–∏—Ä–∞ —Å–∞–∫—É—Ä—ã.
function useEssential(){
  $('#title').text("–≠—Å—Å–µ–Ω—Ü–∏—è —Å–∞–∫—É—Ä—ã");
  $('#room-description').text(`–í—ã –¥–æ—Å—Ç–∞–ª–∏ –∏–∑ –∫–∞—Ä–º–∞–Ω–∞ 1 –∫—É—Å–æ—á–µ–∫ —ç—Å—Å–µ–Ω—Ü–∏–∏ —Å–∞–∫—É—Ä—ã, –∏ —Å—ä–µ–ª–∏ –µ—ë. –≠—Ç–∏ –æ—â—É—â–µ–Ω–∏—è –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–ª –Ω–∏–∫–æ–≥–¥–∞ –≤–∞—Å –µ—â—ë —Ç–∞–∫ –Ω–µ —Ä–∞—Å—Å–ª–∞–±–ª—è–ª–∞!`);
  effect.bleeding.time = 0;
  effect.fire.time = 0;
  effect.darknes.time = 0;
  effect.regen.time += 10;
  effect.regen.heal = 15;
  game.gameEssential -= 1;
  if (effect.paranoia.time >= 5) {
    effect.paranoia.time -= 5;
  } else {
    effect.paranoia.time = 0;
  }
  updateUI();
}

//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã.
function displayRoomDescription(room) {
  $('#title').text(room.name);
  $('#room-description').text(room.description);
}

//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª—É—á–∞–π–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã.
function getRandomRoom() {
  return rooms[Math.floor(Math.random() * rooms.length)];
}

//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
function updateUI() {
  if (player.health < 25) {
    $('#health').text(player.health);
    $('#health').css('color',"red");
  } else {
    $('#health').text(player.health);
    $('#health').css('color',"white");
  }
  $('#coins').text(player.coins);
  $('#crystals').text(player.crystals);
  $('#experience').text(player.experience);
  $('#game_inf').text(player.total);

  $('#eatEssential').hide();
  $('#count_essential').text(game.gameEssential);
  if (game.gameEssential > 0) {
    $('#eatEssential').show();
  }

  $('#effect').text("");
  $('#poison_time').text(effect.poison.time);
  $('#fire_time').text(effect.fire.time);
  $('#regen_time').text(effect.regen.time);
  $('#paranoia_time').text(effect.paranoia.time);
  $('#bleeding_time').text(effect.bleeding.time);
  $('#darknes_time').text(effect.darknes.time);
  if (effect.regen.time > 0) {
    $('#effect').append(effect.regen.icon);
    $('#health').css('color',"#7B68EE");
  }
  if (effect.fire.time > 0) {
    $('#effect').append(effect.fire.icon);
    $('#health').css('color',"#FFA500");
  }
  if (effect.poison.time > 0) {
    $('#effect').append(effect.poison.icon);
    $('#health').css('color',"#00FF00");
  }
  if (effect.paranoia.time > 0) {
    $('#effect').append(effect.paranoia.icon);
  }
  if (effect.bleeding.time > 0) {
    $('#effect').append(effect.bleeding.icon);
    $('#health').css('color',"#B22222");
  }
  if (effect.darknes.time > 0) {
    $('#effect').append(effect.darknes.icon);
    $('#health').css('color',"#6A5ACD");
  }

  if (player.health <= 0) {
    player.coins = 0;
    player.crystals = 0;
    player.experience = 0;

    $('#coins').text(player.coins);
    $('#crystals').text(player.crystals);
    $('#experience').text(player.experience);

    gameOver();
  }
}

//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥–∞ –≤ –∫–æ–º–Ω–∞—Ç—É.
function enterRoom() {
  const room = getRandomRoom();
  displayRoomDescription(room);
  
  player.total += 1;

  $('.game-buttons button').hide();
  game.gameOutput = false;
  game.gameExplosion = true;
  $("#output").text("");

  switch (room.name) {
    case "–õ–æ–≥–æ–≤–æ –î–∞—Ä–∫—É—Å–∞" :
      $('#kick, #sneak').show();
      break;
    case "–ü–µ—Ä–µ–≤–∞–ª":
      $('#go-deeper, #exit').show();
      if (effect.paranoia.time === 0) {
        game.gameOutput = true;
      }
      player.health += room.heal;
      break;
    case "–°—Ç—Ä–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—á–∫–∞":
      $('#go-deeper, #exit').show();
      $('#room-description').append(titles[Math.floor(Math.random() * titles.length)]);
      break;
    case "–û–±—Ä—ã–≤":
      $('#suspension, #edge').show();
      break;
    case "–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—â–µ—Ä—ã":
      if (game.gameCristalCave) {
        $('#room-description').text(`–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –ø—Ä–æ—Ö–æ–¥ –≤ –∫—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—â–µ—Ä—ã, –∏ –æ–Ω —Å–≤–æ–±–æ–¥–µ–Ω! –í—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –≤ –ø–µ—â–µ—Ä—É, –∏ –ª—é–±—É–µ—Ç–µ—Å—å –Ω–µ–æ–ø–∏—Å—É–µ–º–æ–π –∫—Ä–∞—Å–æ—Ç–æ–π –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤... –ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å, –≤ —Å—Ç–æ–ª—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–º –∏ –∑–∞–≥–∞–¥–æ—á–Ω–æ–º –º–µ—Å—Ç–µ?`);
        $('#study, #shoot_down, #scream_cristal, #review, #go-deeper').show();
        game.gameCristalCave = false;
      } else {
        $('#go-deeper, #exit').show();
      }
      break;
    case "–ó–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è —à–∞—Ö—Ç–∞":
      player.health -= room.damage;
      $('#trolley, #boxes, #button, #scream, #go-deeper').show();
      break;
    case "–õ—è–≥—É—à–∫–∞!!!":
      $('#go-deeper, #exit').show();
      audio.src = '../song/lyag.mp3';
      audio.volume = 0.7;
      audio.play();
      if (effect.bleeding.time === 0) {
        player.health += room.heal;
      }
      break;
    case "–≠—Ñ–∏—Ä–Ω—ã–π —Ä–æ–¥–Ω–∏–∫":
      $('#go-deeper, #exit').show();
      player.health += room.heal;
      effect.regen.time += 5;
      effect.regen.heal = 10;
      effect.fire.time = 0;
      effect.poison.time = 0;
      effect.bleeding.time = 0;
      break;
    case "–ö–æ—Ä–Ω–∏ —Å–∞–∫—É—Ä—ã":
      $('#go-deeper, #exit').show();
      player.health += room.heal;
      effect.fire.time = 0;
      effect.poison.time = 0;
      effect.bleeding.time = 0;
      if (effect.paranoia.time >= 5) {
        effect.paranoia.time -=5;
      }
      break;
    case "–ó–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏":
      $('#go-deeper, #exit, #bootle_up').show();
      break;
    case "–≠—Ñ–∏—Ä–Ω—ã–µ —Ä–µ–∫–∏":
      $('#firstWater, #secondWater').show();
      waterFinal = Math.round(Math.random() * 10);
      game.gameFirstWater = waterFinal < 5;
      game.gameSecondWater = waterFinal >= 5;
      break;
    case "–õ–æ–≤—É—à–∫–∞":
      $('#go-deeper, #exit').show();
      player.health -= room.damage;
      let random = Math.round(Math.random() * 5);
       if (random == 1) {
        effect.fire.time += 2;
        effect.fire.damage = 5;
       } else if (random == 2) {
        effect.paranoia.time += 5;
      } else if (random == 3) {
        effect.darknes.time += 2;
        effect.darknes.damage = 35;
      } else if (random == 4) {
        effect.bleeding.time += 6;
        effect.bleeding.damage = 9;
      } else {
        return;
      }
      break;
    case "–ö—Ç–æ-—Ç–æ –ø—Ä–µ–≥—Ä–∞–∂–¥–∞–µ—Ç –ø—É—Ç—å" :
      $('#pay, #dont_pay').show();
      break;
    default:
      $('#go-deeper, #exit').show();
      if (room.rewards !== undefined) {
        player.coins += room.rewards.coins || 0;
        player.crystals += room.rewards.crystals || 0;
        player.experience += room.rewards.experience || 0;
      }
      player.health -= room.damage || 0;
      if (effect.bleeding.time === 0) {
        player.health += room.heal || 0;
      }
      break;
  }
  if (effect.fire.time > 0) {
    player.health -= effect.fire.damage;
    effect.fire.time -=1;
  }
  if (effect.poison.time > 0) {
    player.health -= effect.poison.damage;
    effect.poison.time -=1;
  }
  if (effect.paranoia.time > 0) {
    effect.paranoia.time -=1;
  }
  if (effect.bleeding.time > 0) {
    player.health -= effect.bleeding.damage;
    effect.bleeding.time -=1;
  }
  if (effect.darknes.time > 0) {
    player.health -= effect.darknes.damage;
    effect.darknes.time -=1;
  }
  if (effect.regen.time > 0) {
    player.health += effect.regen.heal;
    if (effect.paranoia.time >= 5) {
      effect.paranoia.time -=5;
    }
    if (effect.fire.time > 0) {
      effect.fire.time -=1;
    }
    if (effect.poison.time > 0) {
      effect.poison.time -=1;
    }
    if (effect.bleeding.time > 0) {
      effect.bleeding.time -=1;
    }
    if (effect.darknes.time > 0) {
      effect.darknes.time -=1;
    }
    effect.regen.time -=1;
  }
  updateUI();
}

//–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.
function exitRoom() {
  if (game.gameOutput === false) {
    $("#output").text("–ú—ã –Ω–µ –º–æ–∂–µ–º –≤—ã–π—Ç–∏ –∏–∑ –ø–æ–¥–∑–µ–º–µ–ª—å—è. –ù–∞–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–º–Ω–∞—Ç—É, –≥–¥–µ –º—ã —Å–º–æ–∂–µ–º –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ä–∏—Ç—É–∞–ª.");
  } else {
    $("#output").text("–í—ã–≤–æ–¥ —É—Å–ø–µ—à–µ–Ω!");
    updateUI();
    window.location.href= '../index';
  }
}

//–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
//–î–∞—Ä–∫—É—Å.
$('#kick').click(function() {
  handleDarkusRoom('kick');
});
$('#sneak').click(function() {
  handleDarkusRoom('sneak');
});
//–û–±—Ä—ã–≤.
$('#suspension').click(function() {
  handleCliffRoom('suspension');
});
$('#edge').click(function() {
  handleCliffRoom('edge');
});
//–®–∞—Ö—Ç–∞.
$('#trolley').click(function() {
  handleMineRoom('trolley');
});
$('#boxes').click(function() {
  handleMineRoom('boxes');
});
$('#button').click(function() {
  handleMineRoom('button');
});
$('#scream').click(function() {
  handleMineRoom('scream');
});
//–≠—Ñ–∏—Ä–Ω—ã–µ —Ä–µ–∫–∏.
$('#firstWater').click(function() {
  handleWaterRoom('firstWater');
});
$('#secondWater').click(function() {
  handleWaterRoom('secondWater');
});
//–ü–æ–¥–Ω—è—Ç–∏–µ –±—É—Ç—ã–ª–∫–∏.
$('#bootle_up').click(handleBotleUp);

//–í—ã–±–æ—Ä –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ.
$('#pay').click(function() {
  handleWRoom('pay');
});
$('#dont_pay').click(function() {
  handleWRoom('dont_pay');
});
//–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–µ—â–µ—Ä–∞.
$('#study').click(function(){
  handleCavesRoom("study");
});
$('#shoot_down').click(function(){
  handleCavesRoom("shoot_down");
});
$('#scream_cristal').click(function(){
  handleCavesRoom("scream_cristal");
});
$('#review').click(function(){
  handleCavesRoom("review");
});
//–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
$('#go-deeper').click(enterRoom);
$('#exit').click(exitRoom);
$('#eatEssential').click(useEssential);

$('#restart').click(function() {
  //–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫.
  if (effect.paranoia.time > 0) {
    player.health = 85;
  } else if (effect.regen.time > 0) {
    player.health = 115;
  } else {
    player.health = 100;
  }
  player.coins = 0;
  player.crystals = 0;
  player.experience = 0;
  player.total = 0;
  effect.fire.time = 0;
  effect.fire.damage = 0;
  effect.poison.time = 0;
  effect.poison.damage = 0;
  effect.bleeding.time = 0;
  effect.bleeding.damage = 0;
  effect.darknes.time = 0;
  effect.darknes.damage = 0;
  game.gameOverDescription = '–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∫–æ–º–Ω–∞—Ç—É, –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏, —á—Ç–æ —Ç–µ—Ä—è–µ—Ç–µ —Å–æ–∑–Ω–∞–Ω–∏–µ. –≠—Ç–æ –±—ã–ª–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–º–Ω–∞—Ç–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–º–æ–≥–ª–∏ –ª–∏—Ü–µ–∑—Ä–µ—Ç—å...';

  game.gameOutput = false;
  game.gameExplosion = true;
  game.gameCristalCave = false;
  game.gameEssential = 0;

  $('#title').text("–ü–æ–¥–∑–µ–º–µ–ª—å–µ");

  $('#restart').hide();
  $('#go-deeper, #exit').show();

  $('#room-description').text('–í—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –≤ —Ç–µ–º–Ω–æ–º –ø–æ–¥–∑–µ–º–µ–ª—å–µ. –°—É–¥—è –ø–æ —Å–∫–∞–∑–∞–º –Ω–∞—Ä–æ–¥–∞, —Ç—É—Ç –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞, –ø–æ—ç—Ç–æ–º—É –Ω–µ –º—É–¥—Ä–µ–Ω–æ, —á—Ç–æ –ø–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –≤—Ç–æ—Ä–æ–π –∂–µ–ª–∞–µ—Ç —Å—é–¥–∞ –ø–æ–ø–∞—Å—Ç—å. –í—ã –≥–æ—Ç–æ–≤—ã –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ –º–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–∞—Ç–∞–∫–æ–º–±—ã?');

  updateUI();
});

//–ú–µ—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
$(document).keydown(function(e) {
  if ((e.ctrlKey && e.shiftKey && e.which === 73) || e.which === 123) {
    e.preventDefault();
    location.href = '../403';
  }
});

function showContextMenu(x, y) {
  $('#custom-context-menu').css({
    display: 'block',
    left: x + 'px',
    top: y + 'px'
  });
}

function hideContextMenu() {
  $('#custom-context-menu').hide();
}

$(document).on('contextmenu', function(e) {
  e.preventDefault();
  showContextMenu(e.clientX, e.clientY);
});

//–°–∫—Ä—ã—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –Ω–µ–≥–æ.
$(document).on('click', function(e) {
  if (!$(e.target).closest('.context-menu').length) {
    hideContextMenu();
  }
});